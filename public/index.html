<!doctype html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Chess App</title>

      <link rel="stylesheet" href="/css/chessground.base.css" />
      <link rel="stylesheet" href="/css/chessground.brown.css" />
      <link rel="stylesheet" href="/css/chessground.cburnett.css" />

      <style>
         * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
         }

         body {

            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
         }

         .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 600px;
            text-align: center;
         }
         #chessboard {
            width: 512px;
            height: 512px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            filter: saturate(1.2); /* Slightly increased saturation for visual appeal */
      </style>
   </head>
   <body>
      <div class="container">
         <div id="chessboard"></div>
         <div class="controls">
            <p id="status">Loading status...</p>
      </div>

      <script type="module">
         import { initializeChessground } from "/js/chessground-setup.js";

         const chessboardElement = document.getElementById("chessboard");
         if (chessboardElement) {
            initializeChessground(chessboardElement);
         } else {
            console.error("The 'chessboard' element was not found in the DOM. Chessground cannot be initialized.");
         }

         fetch("/health")
            .then((response) => response.json())
            .then((data) => {
               const statusElement = document.getElementById("status");
               if (statusElement) {
                  statusElement.textContent = data.status === "ok" ? "✓ Online" : "✗ Offline";
                  statusElement.style.color = data.status === "ok" ? "#28a745" : "#dc3545";
               } else {
                  console.warn("Element with ID 'status' not found. Cannot update health status.");
               }
               console.log("Status OK");
            })
            .catch((error) => {
               const statusElement = document.getElementById("status");
               if (statusElement) {
                  statusElement.textContent = "✗ Error";
                  statusElement.style.color = "#dc3545";
               } else {
                  console.warn("Element with ID 'status' not found. Cannot update health status on error.");
               }
               console.error("Failed to fetch health status:", error);
            });
      </script>
   </body>
</html>
